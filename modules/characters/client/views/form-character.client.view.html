<section>
    <link rel="stylesheet" href="modules/characters/client/css/characterCreation.css" />

  <div class="page-header">
    <h1>{{vm.character._id ? 'Edit Character' : 'New Character'}}  {{vm.creationSteps[vm.step].title}}</h1>
  </div>
  <div class="col-md-12">
    <form name="vm.form.characterForm" class="form-horizontal" ng-submit="vm.save(vm.form.characterForm.$valid)" novalidate>
      <fieldset>

        <!-- Subview loaded here  -->
        <div class="col-md-6">
          <div ng-repeat="step in vm.creationSteps" ng-show="vm.step === $index" ng-include="step.template"></div>
        </div>
        <div class="col-md-5 col-md-offset-1">
          <div class="row">
            <div ng-include="vm.creationSteps[vm.step].help"></div>
          </div>
          <button type="button" ng-disabled="vm.step === 0" class="btn btn-default" ng-click="vm.previousStep()">Back</button>
          <button type="button" class="btn btn-default" ng-click="vm.nextStep()">Next</button>

          <!-- Needs to be CONSISTENTLY in the same place -->
          <div ng-show="(vm.step === 5 && vm.isSpellCaster()) || vm.step === 4 && !vm.isSpellCaster()">
            <div class="form-group">
              <button type="submit" class="btn btn-default">{{vm.character._id ? 'Update' : 'Create'}}</button>
            </div>
          </div>
        </div>
        <div ng-show="vm.error" class="text-danger">
          <strong ng-bind="vm.error"></strong>
        </div>
      </fieldset>
    </form>
  </div>
</section>
